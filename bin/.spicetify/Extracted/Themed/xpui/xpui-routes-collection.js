(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[309],{25215:function(e,t,n){"use strict";n.r(t),n.d(t,{Collection:function(){return Et},default:function(){return yt}});var a=n(27378),r=n.n(a),s=n(79308),c=n(48529),l=n(35181);const o=(0,n(80406).P1)((e=>e.features),(e=>(null==e?void 0:e.enableShows)||!1));var i=n(7444),u=n(69895),m=n(18299),d=n(44638),f=n(91421),g=n(98562);var b=n(94578);const p=()=>{const e=function(){const[e,t]=(0,a.useState)(window.innerWidth),{scrollNodeChildRef:n}=(0,a.useContext)(d.VX),r=(0,f.y)((e=>{null!=e&&e.width&&t(e.width)}),250);return(0,g.y)({refOrElement:n,observeOnly:"width",onResize:r}),e}(),t=(0,s.v9)(o),n=(0,a.useMemo)((()=>[{title:l.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists"},...t?[{title:l.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:user:@:collection:podcasts"}]:[],{title:l.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:user:@:collection:artists"},{title:l.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:user:@:collection:albums"}]),[t]);return r().createElement(m.w,null,r().createElement(u.n,{className:b.Z.tabBar,links:n,windowSize:e}))};var h=n(93868),E=n(8751),y=n(2028),C=n(8934),v=n(9807),w=n(57660),k=n(65526),S=n.n(k),I=n(66917),O=n.n(I),D=n(2315);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=e=>N(N({},e),{},{id:O().from(e.uri).getBase62Id(),external_urls:{spotify:""},href:"",images:e.images.map((e=>N(N({},e),{},{height:e.height,width:e.width})))}),R=e=>e.map(A),T=D.oT.ADDED_AT,P=D.oT.ADDED_AT,_=D.oT.ADDED_AT,j=D.oT.MOST_RELEVANT;var M=n(18499),Z=n(4666),L=n(24209),F=n(27215),H=n(8182);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){const a=B({},n);return a.entities=t?e.items||[]:a.entities.concat(e.items||[]),a.total=e.totalLength,a.next=e.next,a}function V(e,t){const n=B({},t),a=t.entities.filter((t=>t.uri!==e));return n.total=(t.total||0)-(t.entities.length-a.length),n.entities=a,n}const q=e=>{const[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await e();n((null==t?void 0:t.totalLength)||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),{total:t}},W=()=>Promise.resolve({totalLength:0}),Y={offset:0,limit:1};var G=n(7487),Q=n(44018);const U=r().memo((({nrArtists:e})=>{const t=(0,a.useContext)(w.H),{filter:n}=(0,a.useContext)(M.fo),{sortState:s}=(0,a.useContext)(L.Q),c=(0,a.useRef)(!1),o=(0,a.useRef)({entities:[],total:e}),[i,u]=(0,a.useState)(0),m=(0,a.useCallback)((async(e,a,r=!1)=>{if(!c.current){c.current=!r;const l=await t.getArtists({offset:o.current.next||e,limit:a,filter:(0,D.$u)(n),sort:(0,D.e3)(s)});o.current=z(l,r,o.current),c.current=!1,u((e=>e+1))}}),[t,n,s]),d=(0,a.useCallback)((e=>{o.current=V(e,o.current),u((e=>e+1))}),[]);(0,a.useEffect)((()=>{m(0,50,!!i)}),[n,s]);const f=(0,a.useCallback)((()=>{o.current.entities.length!==o.current.total&&m(o.current.entities.length,50)}),[m]);return r().createElement(h.C,{onReachBottom:f},r().createElement("div",{className:b.Z.header},r().createElement(v.Dy,{as:"h1",variant:v.Dy.canon},l.ag.get("artists")),r().createElement(a.Suspense,{fallback:null},r().createElement(Z.E,{filterPlaceholder:l.ag.get("collection.filter.artists"),sortOptions:D.o$}))),r().createElement(Q.Y,{onCollectionItemRemove:d},r().createElement(E.D,{entities:R(o.current.entities)})))})),X=r().memo((()=>{const{total:e}=(()=>{const e=(0,a.useContext)(w.H),t=(0,a.useCallback)((()=>e?null==e?void 0:e.getArtists(Y):W()),[e]);return q(t)})();return null===e?r().createElement(G.h,{errorMessage:l.ag.get("error.request-collection-artists-failure")}):e?r().createElement(U,{nrArtists:e}):r().createElement(y.u,{message:l.ag.get("collection.empty-page.artists-subtitle"),title:l.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:l.ag.get("collection.empty-page.artists-cta")},r().createElement(C.d,{size:64,viewBox:"0 0 64 64"}))})),J=r().memo((()=>r().createElement(L.$,{uri:"collection/artists",defaultSortOption:P},r().createElement(M.hz,{uri:"collection/artists"},r().createElement(X,null)))));var K=n(11631),ee=n(60042),te=n.n(ee),ne=n(60024),ae=n(39576);const re=({renderItems:e,nrItems:t,estimatedItemMaxHeight:n,scrollNodeRef:s,nrRowsOverscan:c=5})=>{const l=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useRef)(null),u=(0,a.useRef)(0),m=(0,a.useRef)({rowCount:0,rowHeight:n,columnCount:1}),[d,f]=(0,a.useState)({firstItemToRender:0,lastItemToRender:-1}),g=(0,a.useCallback)(((e,t)=>{const n=s.current;if(!n)return;const a=Math.floor(n.offsetHeight/t)+2*c;m.current={rowCount:a,rowHeight:t,columnCount:e}}),[c,s]),b=(0,a.useCallback)((()=>{const e=s.current;if(!e)return;const n=Math.floor((e.scrollTop-u.current)/m.current.rowHeight),a=Math.max(n-c,0),r=a*m.current.columnCount,l=Math.min((a+m.current.rowCount-1)*m.current.columnCount-1,t-1);r===d.firstItemToRender&&l===d.lastItemToRender||f({firstItemToRender:r,lastItemToRender:l})}),[d.firstItemToRender,d.lastItemToRender,t,c,s]),p=(0,a.useCallback)(((t,n,a)=>{const r=a+ne.w;return r!==m.current.rowHeight&&t>0&&(g(t,r),b()),e(d.firstItemToRender,d.lastItemToRender,t)}),[g,d.firstItemToRender,d.lastItemToRender,b,e]);(0,a.useEffect)((()=>{const e=i.current,t=s.current;e&&t&&(u.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[s]),(0,a.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&b()}))}));return l.current&&e.observe(l.current),o.current&&e.observe(o.current),()=>{e.disconnect()}}),[b]);const h=Math.ceil(t/m.current.columnCount),E=Math.min(h*m.current.rowHeight,m.current.rowHeight*(c-2)),y=m.current.rowHeight*(d.firstItemToRender/m.current.columnCount),C=d.lastItemToRender/m.current.columnCount+1<h?m.current.rowHeight*(h-m.current.rowCount)-y:0;return r().createElement("div",{ref:i,className:ae.Z.wrapper,style:{height:h*m.current.rowHeight+"px"}},r().createElement("div",{ref:l,className:ae.Z.topSentinel,style:{height:`${y+E}px`}},r().createElement("div",{style:{height:`${E}px`}})),r().createElement("div",{style:{transform:`translateY(${y}px)`}},r().createElement(ne.T,{columnAware:!0,rowAware:!0,render:p})),r().createElement("div",{ref:o,className:ae.Z.bottomSentinel,style:{height:`${C+E}px`}},r().createElement("div",{style:{height:`${E}px`}})))};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(){const e=(e,t)=>{switch(t.type){case"INVALIDATE":return ce(ce({},e),{},{isValid:!1});case"CACHE_ITEMS":return e.isValid?ce(ce({},e),{},{items:ce(ce({},e.items),t.data),hasData:!0}):{isValid:!0,items:ce({},t.data),hasData:!0};default:throw new Error("Action not supported")}},[t,n]=(0,a.useReducer)(e,{items:{},isValid:!0,hasData:!1});return{cacheItems:(0,a.useCallback)(((e,t)=>{const a=e.reduce(((e,n,a)=>(e[a+t]=n,e)),{});n({type:"CACHE_ITEMS",data:a})}),[n]),getCachedItems:(0,a.useCallback)(((e,n)=>{const a=[],r=[];for(let s=e;s<=n;s++)t.items[s]||a.push(s),r.push(t.items[s]);return t.isValid?{items:r,missing:a.length>0?{firstMissingIndex:Math.min(...a),lastMissingIndex:Math.max(...a)}:null}:{items:r,missing:{firstMissingIndex:e,lastMissingIndex:n}}}),[t]),invalidateCache:(0,a.useCallback)((()=>{n({type:"INVALIDATE"})}),[n]),hasCachedData:t.hasData}}var oe=n(65725),ie="_57f056f67915b9db9dabe38d2de3c2da-scss";function ue({renderCard:e,nrCards:t,fetchData:n,limit:s=50,cardGridApiRef:c}){const{scrollNodeRef:l}=(0,a.useContext)(d.VX),{invalidateCache:o,getItemsFromCache:i,hasCachedData:u}=function(e){const{getCachedItems:t,cacheItems:n,invalidateCache:r,hasCachedData:s}=le(),c=(0,a.useRef)(!1),l=(0,a.useRef)(!1);(0,a.useEffect)((()=>(l.current=!0,()=>{l.current=!1})));const o=(0,a.useCallback)(((t,a,r)=>{const s=Math.max(t,0);c.current||(c.current=!0,e(s,a).then((e=>{c.current=!1,e.length>=r&&l.current&&n(e,s)})))}),[n,e]);return{invalidateCache:r,getItemsFromCache:(0,a.useCallback)(((e,n,a)=>{const{items:r,missing:s}=t(e,n);if(s){const{firstMissingIndex:t,lastMissingIndex:r}=s,c=Math.min(r-t+1,a);r===n?o(t,a,c):t===e?o(r-a+1,a,c):o(t,r-t+1,c)}return r}),[o,t]),hasCachedData:s}}(n);(0,a.useImperativeHandle)(c,(()=>({update:()=>o()})));return r().createElement("div",{className:te()({[ie]:!u})},r().createElement(re,{renderItems:(t,n,a)=>{const c=i(t,n,s);return-1===n?[r().createElement(oe.P,{key:"placeholder"})]:c.map(((n,s)=>n?e(n,t+s,a):r().createElement(oe.P,{key:s})))},scrollNodeRef:l,nrItems:t,estimatedItemMaxHeight:500}))}var me=n(17220),de=n(50878),fe=n(90604);const ge=r().memo((({nrAlbums:e})=>{const t=(0,a.useContext)(w.H),{filter:n}=(0,a.useContext)(M.fo),{sortState:s}=(0,a.useContext)(L.Q),c=(0,a.useRef)(null),[o,i]=(0,a.useState)(e);(0,fe.T)("/collection/albums");const u=(0,a.useCallback)((async(e,a)=>{const r=await t.getAlbums({offset:e,limit:a,filter:(0,D.$u)(n),sort:(0,D.Aq)(s)});return r.totalLength!==o&&i(r.totalLength),r.items}),[t,n,s,o]),m=(0,a.useCallback)(((e,t)=>r().createElement(de.ZP,{key:e.uri,value:"card",index:t},r().createElement(me.r,{entity:e}))),[]);return(0,a.useEffect)((()=>{c.current&&c.current.update()}),[s,n,e]),r().createElement(r().Fragment,null,r().createElement("div",{className:b.Z.header},r().createElement(v.Dy,{as:"h1",variant:v.Dy.canon},l.ag.get("albums")),r().createElement(a.Suspense,{fallback:null},r().createElement(Z.E,{filterPlaceholder:l.ag.get("collection.filter.albums"),sortOptions:D.Ru}))),r().createElement(ue,{nrCards:o,renderCard:m,fetchData:u,cardGridApiRef:c}))})),be=r().memo((()=>{const{total:e}=(()=>{const e=(0,a.useContext)(w.H),[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await(null==e?void 0:e.getAlbums(Y));n((null==t?void 0:t.totalLength)||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(H.EW.UPDATE,r),{total:t}})();return null===e?r().createElement(G.h,{errorMessage:l.ag.get("error.request-collection-albums-failure")}):e?r().createElement(ge,{nrAlbums:e}):r().createElement(y.u,{linkTo:"/search",linkTitle:l.ag.get("collection.empty-page.albums-cta"),message:l.ag.get("collection.empty-page.albums-subtitle"),title:l.ag.get("collection.empty-page.albums-title")},r().createElement(K.Z,null))})),pe=r().memo((()=>r().createElement(L.$,{uri:"collection/albums",defaultSortOption:T},r().createElement(M.hz,{uri:"collection/albums"},r().createElement(be,null)))));var he=n(58733),Ee="collection-collectionEntityHeroCard-container",ye="collection-collectionEntityHeroCard-likedSongs",Ce="collection-collectionEntityHeroCard-yourEpisodes",ve="collection-collectionEntityHeroCard-headerContainer",we="collection-collectionEntityHeroCard-tracksContainer",ke="collection-collectionEntityHeroCard-skeletonRow",Se="collection-collectionEntityHeroCard-descriptionContainer",Ie="collection-collectionEntityHeroCard-opacityText",Oe=n(65791),De=n(35075),xe=n(47574),Ne=n(54798);function Ae(e,t=null){return Array.from(new Array(e).keys()).map((e=>r().createElement("div",{className:ke,style:{width:t?`${t}ch`:void 0},key:e})))}const Re=({entity:e={},onClick:t})=>{const n=(0,De.MY)({limit:7}),{name:a="",uri:s=""}=e;return r().createElement(Oe.Z,{className:te()(Ee,ye),onClick:t,headerText:a,featureIdentifier:"your_library",uri:s,renderCardImage:()=>r().createElement("div",{className:ve},r().createElement("div",{className:we},n?n.items.map((({uri:e,name:t,artists:[n]},a)=>r().createElement("span",{key:e},r().createElement("span",{className:Ie},a?" • ":""),r().createElement("span",{dir:"auto"},n.name),r().createElement("span",{dir:"auto",className:Ie},t)))):Ae(3))),renderSubHeaderContent:()=>r().createElement("div",{className:Se},n?`${n.totalLength} ${a}`:Ae(1,a.length))})},Te=({entity:e={}})=>{const t=(0,De.j$)({limit:7});if(!(0,xe.W6)(Ne.eh))return null;const{name:n="",uri:a=""}=e;return r().createElement(Oe.Z,{className:te()(Ee,Ce),headerText:n,featureIdentifier:"your_library",uri:a,renderCardImage:()=>r().createElement("div",{className:ve},r().createElement("div",{className:we},t?t.items.map((({uri:e,name:t,show:n},a)=>r().createElement("span",{key:e},r().createElement("span",{className:Ie},a?" • ":""),r().createElement("span",{dir:"auto"},t),r().createElement("span",{dir:"auto",className:Ie},n.name)))):Ae(3))),renderSubHeaderContent:()=>r().createElement("div",{className:Se},t?l.ag.get("tracklist-header.episodes-counter",t.totalLength):Ae(1,n.length))})};var Pe=n(13170),_e=n(99176),je=n(81978),Me="collection-localFilesCardIcon-container",Ze="collection-localFilesCardIcon-icon",Le=n(83332);const Fe=()=>r().createElement("div",{className:Me},r().createElement(Le.X,{className:Ze}));var He=n(41029),$e=n(75845),Be=n(20651),ze=n(47820),Ve=n(40093),qe=n(73977),We=n(70685);const Ye=function({entity:e}){const t=(0,Pe.ui)(),{name:n,uri:c,images:o}=e,i=(0,a.useRef)(null),u=(0,a.useRef)(!0),m=(0,a.useContext)($e.t),d=(0,s.v9)((e=>(0,Be.QL)(e,ze.bf))),{togglePlay:g}=(0,We.n)({uri:ze.bf,pages:[{items:i.current||[]}]},{featureIdentifier:"local_files"});(0,a.useEffect)((()=>(u.current=!0,()=>{u.current=!1})),[]);const{useNamespacedLocalStorage:b}=(0,a.useContext)(Ve.Xz),[p]=b(qe.J,!1),h=(0,f.y)((async()=>{if(!i.current){const e=await m.getContents();i.current=e.items}u&&g(void 0,{uri:ze.bf,pages:[{items:i.current}]})}),He.s_);return t.canFetchAllTracks&&p?r().createElement(_e.Z,{delegatePlayback:!0,delegateLogging:!0,isPlaying:d,onPlay:h,headerText:n,featureIdentifier:"local_files",uri:c,renderCardImage:()=>r().createElement(je.x,{images:o,fallback:{Component:Fe}}),renderSubHeaderContent:()=>r().createElement("span",null,l.ag.get("local-files.description"))}):null},Ge=function(e){return r().createElement(a.Suspense,{fallback:null},r().createElement(Ye,e))};var Qe=n(19493),Ue=n(18856),Xe=n(6007),Je=n(1391),Ke=n(11509),et=n(18010),tt=n(92270);function nt(e){return Boolean(e)}const at=r().memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:n}){const{filter:c}=(0,a.useContext)(M.fo),{sortState:o}=(0,a.useContext)(L.Q),i=(0,a.useContext)(Ke.BS),[u,m]=(0,a.useState)(e),d=(0,a.useRef)(null),f=(0,s.v9)(Je.Gg).user;(0,fe.T)("/collection/playlists");const g=(0,a.useMemo)((()=>c?[]:[(0,he.I2)(f),(0,he.I2)(f),t?(0,he.bl)(f):null,n?(0,he.gB)(f):null].filter(nt)),[c,n,t,f]),p=(0,a.useCallback)((async(e,t)=>{const n=g.slice(e),a=await i.getContents({offset:e-(g.length-n.length),limit:t,filter:(0,D.$u)(c),sort:(0,D.pT)(o),flatten:!0,decorateImagesAndOwner:!0});return a.totalItemCount!==u&&m(a.totalItemCount),n.concat(a.items)}),[g,i,c,o,u]),h=(0,a.useCallback)(((e,t,n)=>{if(e.id===he.G&&1===t)return null;const a=function(e,t,n){return e===he.G&&n>1?Re:e===he.nk?Ge:e===he.Y3?Qe.T:(0,Ue.U)(t)}(e.id,e.uri,n);return r().createElement(de.ZP,{key:e.uri,value:"card",index:t},r().createElement(a,{entity:e}))}),[]);return(0,a.useEffect)((()=>{d.current&&d.current.update()}),[o,c,e]),r().createElement(r().Fragment,null,r().createElement("div",{className:b.Z.header},r().createElement(v.Dy,{as:"h1",variant:v.Dy.canon},l.ag.get("playlists")),r().createElement(a.Suspense,{fallback:null},r().createElement(Z.E,{filterPlaceholder:l.ag.get("collection.filter.playlists"),sortOptions:D.w0}))),r().createElement(ue,{nrCards:u+g.length,renderCard:h,fetchData:p,cardGridApiRef:d}))})),rt=r().memo((()=>{const e=(0,Ke.Rt)(),t=(0,tt.x)(),n=(0,Pe.ui)(),o=(0,c.k6)(),i=(0,s.I0)(),{useNamespacedLocalStorage:u}=(0,a.useContext)(Ve.Xz),[m]=u(qe.J,!1),d=(0,a.useCallback)((()=>{e&&i((0,et.cg)(l.ag.get("playlist.new-default-name",e.playlistCount+1),(({url:e})=>{o.push(e)})))}),[e,i,o]);return null===e||null===t?r().createElement(G.h,{errorMessage:l.ag.get("error.request-collection-albums-failure")}):null!=e&&e.playlistCount?r().createElement(at,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:n.canFetchAllTracks&&m}):r().createElement(y.u,{linkTitle:l.ag.get("collection.empty-page.playlists-cta"),onClick:d,title:l.ag.get("collection.empty-page.playlists-title"),message:l.ag.get("collection.empty-page.playlists-subtitle")},r().createElement(Xe.Z,null))})),st=r().memo((()=>r().createElement(L.$,{uri:"collection/playlists",defaultSortOption:j},r().createElement(M.hz,{uri:"collection/playlists"},r().createElement(rt,null)))));var ct=n(57664),lt=(n(23615),n(28979)),ot=n(33954),it=n(30061),ut=n(96816);class mt extends a.PureComponent{componentDidMount(){const{entities:e,viewId:t,country:n}=this.props;n&&!e&&t&&this.requestContent(t,n)}componentDidUpdate(e){const{entities:t,viewId:n,country:a}=this.props,{viewId:r}=e;a&&!t&&n!==r&&this.requestContent(n,a)}requestContent(e,t){const{onRequestView:n}=this.props;n(e,t)}render(){const{entities:e,viewId:t,total:n,title:a}=this.props;return e?r().createElement(ut.P,{title:a,total:n,seeAllUri:(0,it.pL)(t)},e.map((e=>{const t=(0,Ue.U)(e.uri);return r().createElement(t,{key:e.uri,entity:e})}))):null}}const dt={onRequestView:lt.MM};(0,s.$j)((e=>{const t="ginger-audio-shows-top-20-web",{content:n={},name:a}=e.entities.views[t]||{},{total:r=0,items:s}=n;return{total:r,title:a,entities:s,viewId:t,country:(0,ot.r)(e)}}),dt)(mt);const ft=r().memo((({nrShows:e})=>{const t=(0,a.useContext)(w.H),{filter:n}=(0,a.useContext)(M.fo),{sortState:c}=(0,a.useContext)(L.Q),o=(0,a.useRef)(!1),i=(0,a.useRef)({entities:[],total:e}),[u,m]=(0,a.useState)(0),{user:d}=(0,s.v9)(Je.Gg),f=(0,a.useCallback)((async(e,a,r=!1)=>{if(!o.current){o.current=!r;const s=await t.getShows({offset:e,limit:a,filter:(0,D.$u)(n),sort:(0,D.EY)(c)});i.current=z(s,r,i.current),o.current=!1,m((e=>e+1))}}),[t,n,c,i]),g=(0,a.useCallback)((e=>{i.current=V(e,i.current),m((e=>e+1))}),[]);(0,a.useEffect)((()=>{f(0,50,!!u)}),[n,c]);const p=(0,a.useCallback)((()=>{i.current.entities.length!==i.current.total&&f(i.current.entities.length,50)}),[f,i]);return r().createElement(h.C,{onReachBottom:p},r().createElement("div",{className:b.Z.header},r().createElement(v.Dy,{as:"h1",variant:v.Dy.canon},l.ag.get("podcasts")),r().createElement(a.Suspense,{fallback:null},r().createElement(Z.E,{filterPlaceholder:l.ag.get("collection.filter.podcasts"),sortOptions:D.a6}))),r().createElement(Q.Y,{onCollectionItemRemove:g},r().createElement(de.ZP,{value:"EntitiesGrid"},r().createElement(ne.T,{render:()=>{const e=(0,he.bl)(d);return(n||!e||0===i.current.entities.length?[]:[r().createElement(a.Suspense,{fallback:null,key:"your-episodes-card"},r().createElement(Te,{entity:e}))]).concat(R(i.current.entities).map(((e,t)=>{const n=(0,Ue.U)(e.uri);return r().createElement(de.ZP,{key:e.uri,value:"card",index:t},r().createElement(n,{entity:e}))})))}}))))})),gt=r().memo((()=>{const{total:e}=(()=>{const e=(0,a.useContext)(w.H),t=(0,a.useCallback)((()=>e?null==e?void 0:e.getShows(Y):W()),[e]);return q(t)})();return null===e?r().createElement(G.h,{errorMessage:l.ag.get("error.request-collection-shows-failure")}):e?r().createElement(ft,{nrShows:e}):r().createElement("div",{className:"CollectionShowsContainer"},r().createElement(y.u,{linkTo:"/genre/podcasts-web",linkTitle:l.ag.get("collection.empty-page.shows-cta"),message:l.ag.get("collection.empty-page.shows-subtitle"),title:l.ag.get("collection.empty-page.shows-title")},r().createElement(ct.Z,null)),r().createElement(mt,null))})),bt=r().memo((()=>r().createElement(L.$,{uri:"collection/podcasts",defaultSortOption:_},r().createElement(M.hz,{uri:"collection/podcasts"},r().createElement(gt,null)))));var pt=n(21195);const ht=r().lazy((async()=>await n.e(246).then(n.bind(n,88631)))),Et=()=>{const e=(0,s.v9)(o),t=(0,s.I0)(),n=(0,pt.g)();return(0,a.useEffect)((()=>{t((0,i.Dk)(l.ag.get("collection.page-title"))),n.setReferrer("your_library")}),[t,n]),r().createElement("section",{className:"contentSpacing"},r().createElement(c.AW,{path:"/collection/artists"},r().createElement(J,null)),r().createElement(c.AW,{path:"/collection/albums"},r().createElement(pe,null)),r().createElement(c.AW,{path:"/collection/playlists"},r().createElement(st,null)),e&&r().createElement(c.AW,{path:"/collection/podcasts"},r().createElement(bt,null)),r().createElement(c.AW,{path:"/collection/music-downloads"},r().createElement(ht,null)),r().createElement(p,null))};var yt=Et},24209:function(e,t,n){"use strict";n.d(t,{Q:function(){return l},$:function(){return o}});var a=n(27378),r=n.n(a),s=n(94744),c=n(2315);const l=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:c.oT.ADDED_AT}),o=r().memo((function({uri:e,children:t,defaultSortOption:n}){return r().createElement(s.r,{uri:e,defaultState:n,sortContext:l},t)}))},4666:function(e,t,n){"use strict";n.d(t,{E:function(){return d}});var a=n(27378),r=n.n(a),s=n(57660),c="collection-searchBar-searchBar",l=n(87405),o=n(6953),i=n(2315),u=n(24209);const m=r().memo((({sortOptions:e})=>{const{sortState:t,setSortState:n}=(0,a.useContext)(u.Q),s=(0,a.useCallback)((e=>{n(i.ei[e])}),[n]),c=e.map((e=>i.MY[e])),l=i.MY[t];return r().createElement(o.A,{options:c,onSelect:s,selected:l})})),d=r().memo((({filterPlaceholder:e,sortOptions:t})=>{const n=(0,a.useContext)(s.H);return r().createElement("div",{className:c},null!=n&&n.getCapabilities().canFilter?r().createElement(l.K,{placeholder:e}):null,null!=n&&n.getCapabilities().canSort?r().createElement(m,{sortOptions:t}):null)}))},73977:function(e,t,n){"use strict";n.d(t,{J:function(){return p},P:function(){return h}});var a=n(42065),r=n(35181),s=n(73333),c=n(27378),l=n.n(c),o=n(64954),i=n(9807),u=n(14298);const m=({source:e,onAddOrRemoveSource:t})=>{const[n,o]=(0,c.useState)(e.enabled);return l().createElement(l().Fragment,null,l().createElement(i.Dy,{as:"span",variant:i.Dy.mesto,color:u.nh1,htmlFor:`settings.local-files.${e.id}`},function(e){var t,n;let a;switch(e.id){case"downloads":a=r.ag.get("local-files.source.downloads");break;case"itunes":a=r.ag.get("local-files.source.itunes");break;case"my_music":a=r.ag.get("local-files.source.my_music");break;case"windows_music_library":a=r.ag.get("local-files.source.windows_music_library");break;default:a=null!==(t=null!==(n=e.name)&&void 0!==n?n:e.path)&&void 0!==t?t:e.id}return a}(e)),l().createElement(s.Z,{className:a.Z.secondColumn,id:`settings.local-files.${e.id}`,value:n,onSelected:n=>{o(n),t(e.id,n)}}))};var d=n(75845),f=n(3108);const g=()=>{const[e,t]=(0,c.useState)([]),n=(0,c.useContext)(d.t),s=(0,f.r)(),u=(0,c.useCallback)((async()=>t(await n.getSources())),[n]);(0,c.useEffect)((()=>{u()}),[u]);const g=(0,c.useCallback)((async()=>{const e=await n.browseForFolder();e.path&&(await n.addSource(e.path),u(),s.say(r.ag.get("settings.localFilesFolderAdded",e.path)))}),[s,n,u]),b=(0,c.useCallback)(((e,t)=>{t?n.addSource(e):n.removeSource(e)}),[n]);return l().createElement(l().Fragment,null,l().createElement(i.Dy,{as:"h3",variant:i.Dy.balladBold,className:a.Z.title},r.ag.get("settings.showSongsFrom")),e.map((e=>e.found?l().createElement(m,{key:e.id,source:e,onAddOrRemoveSource:b}):null)),l().createElement(o.z,{"aria-label":r.ag.get("settings.addASource"),className:a.Z.button,version:"outlined",onClick:()=>{g()}},r.ag.get("settings.addASource")))};var b=n(40093);const p="showLocalFiles",h=()=>{const{useNamespacedLocalStorage:e}=(0,c.useContext)(b.Xz),[t,n]=e(p,!1);return l().createElement(l().Fragment,null,l().createElement(i.Dy,{as:"h2",variant:i.Dy.cello,className:a.Z.title},r.ag.get("settings.localFiles")),l().createElement(i.Dy,{as:"label",variant:i.Dy.mesto,color:u.nh1,htmlFor:"settings.showLocalFiles"},r.ag.get("settings.showLocalFiles")),l().createElement(s.Z,{className:a.Z.secondColumn,id:"settings.showLocalFiles",value:t,onSelected:e=>{n(e)}}),t?l().createElement(g,null):null)}},69895:function(e,t,n){"use strict";n.d(t,{n:function(){return S}});var a=n(27378),r=n.n(a),s=n(60042),c=n.n(s),l=n(72724),o=n(35181),i="queue-tabBar-nav",u="queue-tabBar-headerCentered",m="queue-tabBar-headerItem",d="queue-tabBar-moreButton",f="queue-tabBar-moreButtonActive",g="queue-tabBar-dropdownItemLink",b="queue-tabBar-active",p="queue-tabBar-headerItemLink",h="queue-tabBar-header",E="queue-tabBar-chevron",y=n(9807),C=n(36256),v=n(34761),w=n(79744);const k=({items:e,activeItemId:t,setActiveDropdownItem:n})=>r().createElement(v.v,null,e.map((e=>r().createElement(w.s,{role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===t,className:g,activeClassName:b,isActive:t=>!!t&&(n(e),!0),onClick:()=>{n(e)}},e.title)))),S=r().memo((({isCentered:e,links:t,landmarkLabel:n,className:s,windowSize:g=1/0})=>{const[v,w]=(0,a.useState)(null),S=(0,a.useRef)(null),[I,O]=(0,a.useState)([]),[D,x]=(0,a.useState)(0),[N,A]=(0,a.useState)([]);(0,a.useEffect)((()=>{S.current&&x(S.current.clientWidth)}),[g]),(0,a.useEffect)((()=>{if(!S.current)return;const e=Array.from(S.current.children).map((e=>e.clientWidth));O(e)}),[t]),(0,a.useEffect)((()=>{if(!S.current)return;if(I.slice(0,-1).reduce(((e,t)=>e+t),0)<=D)return void A([]);const e=I.reduce(((e,t)=>e>t?e:t),0),t=[];let n=e;I.forEach(((e,a)=>{D>=n+e?n+=e:t.push(a)})),A(t)}),[D,I]);const R=(0,a.useCallback)((e=>!!e&&(w(null),!0)),[]);return r().createElement("nav",{className:c()(s,i),"aria-label":n},r().createElement("ul",{className:e?u:h,ref:S},t.filter(((e,t)=>!N.includes(t))).map((e=>r().createElement("li",{key:e.to,className:m},r().createElement(l.O,{exact:!0,className:p,activeClassName:b,to:e.to,isActive:R},r().createElement(y.Dy,{variant:y.Dy.mestoBold},e.title))))),N.length||0===I.length?r().createElement("li",{className:m},r().createElement(C.xV,{renderInline:!0,menu:r().createElement(k,{items:t.filter(((e,t)=>N.includes(t))),activeItemId:null==v?void 0:v.itemId,setActiveDropdownItem:w})},((e,t,n)=>r().createElement("button",{className:c()(d,{[f]:v}),type:"button",onClick:t,ref:n},r().createElement(y.Dy,{as:"span",variant:y.Dy.mestoBold},v?v.title:o.ag.get("more")),r().createElement("span",{className:c()(E,{"spoticon-chart-up-16":e,"spoticon-chart-down-16":!e})}))))):null))}))},73333:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a="x-toggle-wrapper",r="x-toggle-indicatorWrapper",s="x-toggle-input",c="x-toggle-indicator",l=n(60042),o=n.n(l),i=n(27378),u=n.n(i);const m=({value:e,disabled:t,onSelected:n,id:l,className:i})=>u().createElement("label",{className:o()(a,i)},u().createElement("input",{id:l,className:s,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;n(t)}}),u().createElement("span",{className:r},u().createElement("span",{className:c})))},94578:function(e,t){"use strict";t.Z={header:"collection-collection-header",tabBar:"collection-collection-tabBar",AddToPlaylistIcon:"collection-collection-AddToPlaylistIcon"}},42065:function(e,t){"use strict";t.Z={container:"x-settings-container",header:"x-settings-header",secondColumn:"x-settings-secondColumn",facebookButton:"x-settings-facebookButton",buttonContainer:"x-settings-buttonContainer",title:"x-settings-title",button:"x-settings-button",crossFadeContainer:"x-settings-crossFadeContainer",restartAppButton:"x-settings-restartAppButton",input:"x-settings-input",wordBreakAll:"x-settings-wordBreakAll"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map