(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{48276:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var l=a(14298),n=a(83332),s=a(27378),r=a.n(s),c="collection-local-files-localFiles-container",i="collection-local-files-localFiles-searchBoxContainer",o=a(35181),u=a(34159),m=a(8621),d=a(13170),f=a(90849),g=a(41805),b=a(66027),E=a(26425),y=a(7487),h=a(79378),p=a(50878),k=a(40299),x=a(24878),C=a(41432),v=a(51029),S=a(70266),D=a(2124),w=a(72612),R=a(5464),P=a.n(R),_=a(56904),F=a(18499),N=a(37585),I=a(12275);const A=r().memo((({uri:e,uid:t,name:a,duration_ms:l,artists:n,album:c,isMOGEFRestricted:i,isExplicit:u,isPlayable:m,index:d,contextUri:f,imgUrl:g,usePlayContextItem:b})=>{const{filter:E}=(0,s.useContext)(F.fo),{isActive:y,isPlaying:h,triggerPlay:k,togglePlay:R}=b({uid:t,uri:e,index:d}),A=(0,_.P)(),{badges:Z,hasBadges:B}=(0,S.r)({isExplicit:u}),T=(null==n?void 0:n.map((e=>e.name)).join(o.ag.getSeparator()))||"";return r().createElement(p.ZP,{value:"row",index:d},r().createElement(I._,{menu:r().createElement(N.N,{uri:e,uid:t,contextUri:f})},r().createElement(v.c,{uri:e,contextUri:f,isActive:y,index:d,onTriggerPlay:()=>{k()},ariaRowIndex:d+1,isPlayable:m,ageRestricted:i,dragMetadata:{name:a,createdBy:T}},r().createElement(C.Dd,{ariaColIndex:0},r().createElement(C.Du,{playAriaLabel:o.ag.get("tracklist.a11y.play",a,T),isPlaying:h,onClick:()=>{R()}},r().createElement(C.km,null,d+1))),r().createElement(C.vZ,{ariaColIndex:1},r().createElement(C.lD,{src:g||(0,w.c)()}),r().createElement(C.vm,null,r().createElement(C.Wh,null,r().createElement(P(),{searchWords:[E],textToHighlight:a,findChunks:A,highlightClassName:x.Z.filterHighlight})),B&&r().createElement(C.g3,null,Z.explicit?r().createElement(D.N,null):null),r().createElement(C.K9,null,n&&r().createElement(_.o,{nonInteractive:!0,artists:n,filter:E})))),r().createElement(C.UA,{ariaColIndex:2},c.name&&r().createElement(C.BM,{nonInteractive:!0,uri:c.uri,name:c.name},r().createElement(P(),{searchWords:[E],textToHighlight:c.name,findChunks:A,highlightClassName:x.Z.filterHighlight}))),r().createElement(C.mU,{ariaColIndex:3},r().createElement(C.A$,{duration:l}),r().createElement(C.Zv,{menu:r().createElement(N.N,{uri:e,uid:t,contextUri:f})})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index));var Z=a(83553);const B=new Set(Z.MI),T=r().memo((({uri:e,tracks:t,columns:a,sortState:l,handleSort:n,usePlayContextItem:c,tracklistDomRef:i})=>{const u=(0,s.useRef)(null),m=(0,s.useCallback)(((t,a)=>{const l=(0,k.X)(t.album.images,{desiredSize:40,desiredLabel:"small"});return r().createElement(A,{key:t.uid,index:a,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,type:t.type,imgUrl:(null==l?void 0:l.url)||"",usePlayContextItem:c})}),[e,c]);return r().createElement(r().Fragment,null,r().createElement(p.ZP,{value:"playlist-tracklist"},r().createElement(h.Pv,{key:e,ariaLabel:o.ag.get("local-files"),hasHeaderRow:!0,columns:a,sortableColumns:B,sortState:l,onSort:n,renderRow:m,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:i})))}));var U=a(2028),L=a(75845),z=a(47820),Q=a(11847),M=a(87405),O=a(86268),K=a(40093),X=a(73977),$=a(90700),H=a(70685),W=a(79032);const G=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],q=()=>{const{filter:e}=(0,s.useContext)(F.fo),{sortState:t,setSortState:a}=(0,s.useContext)(Z.Gb),h=(0,s.useContext)(L.t),{useNamespacedLocalStorage:p}=(0,s.useContext)(K.Xz),[k]=p(X.J,!1),x=(0,d.sn)(),[C,v]=(0,s.useState)([]),S=(0,O.Y)(l.Fzl),{filterBoxApiRef:D,filterBoxDomRef:w,tracklistDomRef:R,handleKeyDown:P}=(0,W.Q)(),_=(0,s.useCallback)((e=>{a((0,Q.VK)(e,t))}),[t,a]),N=(0,s.useCallback)((async()=>{const a=await h.getContents({sort:(0,Q._j)(t),filter:(0,Q.$u)(e)});v(a.items)}),[h,t,e]);(0,s.useEffect)((()=>{N()}),[N]);const{isPlaying:I,togglePlay:A,usePlayContextItem:B}=(0,H.n)({uri:z.bf,pages:[{items:C}]},{featureIdentifier:"local_files"});return x?0!==x.totalLength&&k?r().createElement("div",{role:"presentation",className:c,onKeyDown:P},r().createElement(b.gF,{backgroundColor:S},r().createElement(f.W,null,r().createElement(E.$,{size:u.qE.sm,onClick:()=>A(),isPlaying:I,uri:z.bf}),r().createElement(g.i,{text:o.ag.get("local-files")})),r().createElement(b.sP,null,r().createElement(b.xd,null,o.ag.get("local-files")),r().createElement(b.T0,null,o.ag.get("local-files.description")))),r().createElement(m.o,{backgroundColor:S},r().createElement(m.F,null,r().createElement(E.$,{size:u.qE.xl,onClick:()=>A(),isPlaying:I,uri:z.bf}),r().createElement("div",{className:i},r().createElement(M.K,{placeholder:o.ag.get("playlist.search_in_playlist"),filterBoxApiRef:D,outerRef:w}),r().createElement($.c,{columns:Z.MI})))),r().createElement("div",{className:"contentSpacing"},r().createElement(T,{tracks:C,uri:z.bf,columns:G,handleSort:_,sortState:t,usePlayContextItem:B,tracklistDomRef:R}))):r().createElement(U.u,{linkTo:"/preferences",linkTitle:o.ag.get("local-files.empty-button"),message:o.ag.get("local-files.empty-description"),title:o.ag.get("local-files.empty-header")},r().createElement(n.X,{iconSize:64})):r().createElement(y.h,{errorMessage:o.ag.get("error.request-artist-failure")})};var j=()=>r().createElement(Z.kz,{uri:"spotify:internal:local-files"},r().createElement(F.hz,{uri:"spotify:internal:local-files"},r().createElement(q,null)))},90700:function(e,t,a){"use strict";a.d(t,{c:function(){return m}});var l=a(27378),n=a.n(l),s=a(79378),r=a(83553),c=a(11847),i=a(6953),o=a(2315);function u(e){return!!e}const m=({columns:e})=>{const t=[...e];t.splice(2,0,s.QD.ARTIST);const{sortState:a,setSortState:m}=(0,l.useContext)(r.Gb),d=function(e){return null===e.column?o.mE[s.QD.INDEX]:(0,c.cB)(e.column,e.order)?o.mE[s.QD.ARTIST]:o.mE[e.column]}(a),f=(0,l.useCallback)((e=>{m((0,o.WQ)(e,a.column,a.order))}),[m,a.column,a.order]),g=(0,l.useCallback)((()=>null!==a.column),[a.column]),b=t.map((e=>o.mE[e])).filter(u);return n().createElement(i.A,{options:b,onSelect:f,selected:d,isSelectionChanged:g,sortOrder:a.order})}},73977:function(e,t,a){"use strict";a.d(t,{J:function(){return E},P:function(){return y}});var l=a(42065),n=a(35181),s=a(73333),r=a(27378),c=a.n(r),i=a(64954),o=a(9807),u=a(14298);const m=({source:e,onAddOrRemoveSource:t})=>{const[a,i]=(0,r.useState)(e.enabled);return c().createElement(c().Fragment,null,c().createElement(o.Dy,{as:"span",variant:o.Dy.mesto,color:u.nh1,htmlFor:`settings.local-files.${e.id}`},function(e){var t,a;let l;switch(e.id){case"downloads":l=n.ag.get("local-files.source.downloads");break;case"itunes":l=n.ag.get("local-files.source.itunes");break;case"my_music":l=n.ag.get("local-files.source.my_music");break;case"windows_music_library":l=n.ag.get("local-files.source.windows_music_library");break;default:l=null!==(t=null!==(a=e.name)&&void 0!==a?a:e.path)&&void 0!==t?t:e.id}return l}(e)),c().createElement(s.Z,{className:l.Z.secondColumn,id:`settings.local-files.${e.id}`,value:a,onSelected:a=>{i(a),t(e.id,a)}}))};var d=a(75845),f=a(3108);const g=()=>{const[e,t]=(0,r.useState)([]),a=(0,r.useContext)(d.t),s=(0,f.r)(),u=(0,r.useCallback)((async()=>t(await a.getSources())),[a]);(0,r.useEffect)((()=>{u()}),[u]);const g=(0,r.useCallback)((async()=>{const e=await a.browseForFolder();e.path&&(await a.addSource(e.path),u(),s.say(n.ag.get("settings.localFilesFolderAdded",e.path)))}),[s,a,u]),b=(0,r.useCallback)(((e,t)=>{t?a.addSource(e):a.removeSource(e)}),[a]);return c().createElement(c().Fragment,null,c().createElement(o.Dy,{as:"h3",variant:o.Dy.balladBold,className:l.Z.title},n.ag.get("settings.showSongsFrom")),e.map((e=>e.found?c().createElement(m,{key:e.id,source:e,onAddOrRemoveSource:b}):null)),c().createElement(i.z,{"aria-label":n.ag.get("settings.addASource"),className:l.Z.button,version:"outlined",onClick:()=>{g()}},n.ag.get("settings.addASource")))};var b=a(40093);const E="showLocalFiles",y=()=>{const{useNamespacedLocalStorage:e}=(0,r.useContext)(b.Xz),[t,a]=e(E,!1);return c().createElement(c().Fragment,null,c().createElement(o.Dy,{as:"h2",variant:o.Dy.cello,className:l.Z.title},n.ag.get("settings.localFiles")),c().createElement(o.Dy,{as:"label",variant:o.Dy.mesto,color:u.nh1,htmlFor:"settings.showLocalFiles"},n.ag.get("settings.showLocalFiles")),c().createElement(s.Z,{className:l.Z.secondColumn,id:"settings.showLocalFiles",value:t,onSelected:e=>{a(e)}}),t?c().createElement(g,null):null)}},73333:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var l="x-toggle-wrapper",n="x-toggle-indicatorWrapper",s="x-toggle-input",r="x-toggle-indicator",c=a(60042),i=a.n(c),o=a(27378),u=a.n(o);const m=({value:e,disabled:t,onSelected:a,id:c,className:o})=>u().createElement("label",{className:i()(l,o)},u().createElement("input",{id:c,className:s,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;a(t)}}),u().createElement("span",{className:n},u().createElement("span",{className:r})))},79032:function(e,t,a){"use strict";a.d(t,{Q:function(){return n}});var l=a(27378);const n=()=>{const e=(0,l.useRef)(null),t=(0,l.useRef)(null),a=(0,l.useRef)(null);return{filterBoxApiRef:e,filterBoxDomRef:t,tracklistDomRef:a,handleKeyDown:l=>{var n,s,r;"Escape"===l.key&&((null!==(n=t.current)&&void 0!==n&&n.contains(l.target)||null!==(s=a.current)&&void 0!==s&&s.contains(l.target))&&(null===(r=e.current)||void 0===r||r.clearFilter()))}}}},42065:function(e,t){"use strict";t.Z={container:"x-settings-container",header:"x-settings-header",secondColumn:"x-settings-secondColumn",facebookButton:"x-settings-facebookButton",buttonContainer:"x-settings-buttonContainer",title:"x-settings-title",button:"x-settings-button",crossFadeContainer:"x-settings-crossFadeContainer",restartAppButton:"x-settings-restartAppButton",input:"x-settings-input",wordBreakAll:"x-settings-wordBreakAll"}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map