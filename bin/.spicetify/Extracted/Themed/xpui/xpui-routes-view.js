(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[450],{56738:function(e,t,n){"use strict";n.d(t,{c:function(){return Ee}});var r=n(65526),a=n.n(r),l=n(27378),c=n.n(l),o=n(30061),s=n(38918),i=n(50878),u=n(18856),m=n(18474),d=n(60042),f=n.n(d),b="view-homeShortcutsGrid-shortcuts",E="view-homeShortcutsGrid-grid",g="view-homeShortcutsGrid-shortcutLink",v="view-homeShortcutsGrid-shortcut",p="view-homeShortcutsGrid-draggable",y="view-homeShortcutsGrid-imageContainer",h="view-homeShortcutsGrid-imageWrapper",k="view-homeShortcutsGrid-image",w="view-homeShortcutsGrid-fallbackWrapper",C="view-homeShortcutsGrid-main",I="view-homeShortcutsGrid-name",L="view-homeShortcutsGrid-PlayButtonContainer",P="view-homeShortcutsGrid-PlayButtonContainerVisible",_=n(9807),O=n(44135),A=n(89341),T=n(191),N=n(60024),M=n(14298),D=n(60210),S=n(2398),x=n.n(S),j=n(35181),U=n(66917),R=n.n(U),B=n(34601),W=n(52370),F=n(27572),G=n(12743),H=n(12275),J=n(16023),Y=n(48529),V=n(88319),q=n(99181),z=n(34159),$=n(54220),K=n(40299),Q=n(95753);const X=c().memo((({images:e=[],fallbackIcon:t=B.e})=>{const n=(0,K.X)(e),r=null!=n&&n.url?h:w;return c().createElement("div",{className:y},c().createElement("div",{className:r},c().createElement(Q.E,{className:k,src:null==n?void 0:n.url,loading:"lazy",testid:"shortcut-image"},c().createElement(t,{"aria-hidden":!0}))))}));var Z=n(44084),ee=n(70685);const te=c().memo((({item:e,fallbackIcon:t,showPlayButton:n,onContextMenu:r=(()=>{}),onTouchStart:a=(()=>{}),onTouchEnd:o=(()=>{})})=>{const s=(0,Y.k6)(),i=(0,V.o)(),{setColorFromUri:u,resetColor:m}=(0,Z.WQ)(),{isPlaying:d,togglePlay:b}=(0,ee.n)({uri:e.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const E=(0,l.useCallback)((()=>{i({targetUri:e.uri,intent:"navigate",type:"click"}),s.push(R().from(e.uri).toURLPath(!0))}),[s,e.uri,i]),y=(0,l.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return c().createElement("div",{className:v,onContextMenu:r,onTouchStart:a,onTouchEnd:o,onMouseEnter:y,onMouseLeave:m},c().createElement(q.Z,{uri:e.uri,text:e.name,extraClassName:p},c().createElement(X,{images:e.images,fallbackIcon:t}),c().createElement("div",{className:C},c().createElement($.r,{to:e.uri,onClick:E,title:e.name},c().createElement(_.Dy.p,{variant:_.Dy.balladBold,className:I},e.name)),n&&c().createElement("div",{className:f()(L,{[P]:d})},c().createElement(z.JM,{size:z.qE.sm,isPlaying:d,onClick:function(){i({targetUri:e.uri,intent:d?"pause":"play",type:"click"}),b()}}))),c().createElement("div",{onClick:E,className:g})))}));var ne=n(52003),re=n(7164),ae=n(75933);const le=c().memo((e=>R().isCollection(e.item.uri)?c().createElement(te,x()({},e,{fallbackIcon:B.e})):c().createElement(H._,{menu:c().createElement(J.X,{uri:e.item.uri})},c().createElement(te,x()({},e,{fallbackIcon:B.e}))))),ce=c().memo((e=>c().createElement(H._,{menu:c().createElement(ne.Y,{uri:e.item.uri})},c().createElement(te,x()({},e,{fallbackIcon:W.u}))))),oe=c().memo((e=>c().createElement(H._,{menu:c().createElement(re.m,{uri:e.item.uri})},c().createElement(te,x()({},e,{fallbackIcon:F.i}))))),se=c().memo((e=>c().createElement(H._,{menu:c().createElement(ae.M,{uri:e.item.uri})},c().createElement(te,x()({},e,{fallbackIcon:G.n,showPlayButton:!1})))));var ie=n(83509);const ue=c().memo((({tagline:e,items:t})=>{const{fetchMultipleColors:n}=(0,Z.WQ)(),[r,a]=(0,l.useState)(270),o=!(0,ie.k)(),s=(0,l.useRef)(null),i=(()=>{const e=(new Date).getHours();let t=j.ag.get("home.evening");return e>=5&&e<12?t=j.ag.get("home.morning"):e>=12&&e<18&&(t=j.ag.get("home.afternoon")),t})(),u=(0,l.useCallback)((()=>{const e=s.current;if(null==e||!e.parentElement)return;const t=(n=e.parentElement.offsetWidth)<700?240:n>=700&&n<1400?270:300;var n;t!==r&&a(t)}),[r]);(0,D.a)((()=>{u()})),(0,l.useLayoutEffect)((()=>{u()})),(0,l.useEffect)((()=>{const e=(null==t?void 0:t.map(Z.lh))||[];n(e)}),[t,n]);const m=(0,l.useCallback)(((e,n)=>{if(null==t||!t.length)return null;const r=n>=270;return c().createElement(c().Fragment,null,t.filter(((t,n)=>n<2*e)).map(((e,t)=>{const n=function(e){const t=(R().from(e)||{}).type;switch(t){case R().Type.ARTIST:return oe;case R().Type.ALBUM:case R().Type.COLLECTION_ALBUM:return ce;case R().Type.PLAYLIST:case R().Type.PLAYLIST_V2:return le;case R().Type.SHOW:return se;case R().Type.COLLECTION:return le;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),se}}(e.uri);return c().createElement(n,{key:e.id,item:e,showPlayButton:r,shouldSetBackgroundColor:0===t})})))}),[t]);return o||null==t||!t.length?null:c().createElement("section",{className:b,"aria-label":i,ref:s},c().createElement(T.r,{title:i,titleVariant:_.Dy.alto,tagline:e}),c().createElement(N.T,{className:f()(E),columnAware:!0,render:m,minimumColumnWidth:r,rowGap:M.o78}))})),me=(0,O.P)(ue,(()=>null),(e=>(0,A.v)({from:"HomeShortcutsGrid",error:e})));var de=n(96816);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ee=({spaces:e,viewName:t,viewId:n,isAnonymous:r})=>{const a=(0,l.useCallback)((e=>{const t=((e,t)=>{let{uri:n}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(n=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),n.endsWith("-page")||(n+="-page"),"hub-browse-grid"===t&&(n=n.replace(":view:",":genre:"))),n})(e,n),r=(0,u.U)(t);return c().createElement(r,{key:e.href,entity:be(be({},e),{},{uri:t})})}),[n]),d=(0,l.useCallback)(((e,t)=>{const n=(0,u.U)(e.uri);return c().createElement(i.JL,{key:e.uri||t,value:"card",index:t},c().createElement(n,{entity:e}))}),[]),f=(0,l.useCallback)(((e,t)=>{switch(e.type){case"link":return a(e);default:return d(e,t)}}),[d,a]),b=(0,l.useCallback)((e=>!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||r&&"uniquely-yours-shelf"===e.id)),[r]);return e&&0!==e.length?e[0].content?c().createElement(c().Fragment,null,e.filter(b).map(((e,t)=>{const r=e.content&&(0,o.pL)((0,o.SK)(e.href));return e.id===s.RECENTLY_PLAYED_VIEW_ID||e.id===m.uK?c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(s.default,{showAll:!1})):"shortcuts"===e.id?c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(me,{items:e.content.items,title:e.name,tagline:e.tag_line})):c().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},c().createElement(de.P,{total:e.content.total,seeAllUri:r,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(f)))}))):c().createElement(i.JL,{value:"headered-grid"},c().createElement(de.P,{showAll:!0,title:t,total:(null==e?void 0:e.length)||0},null==e?void 0:e.map(f))):null}},57388:function(e,t,n){"use strict";n.r(t),n.d(t,{View:function(){return T},default:function(){return N}});var r=n(27378),a=n.n(r),l=n(60042),c=n.n(l),o=n(93868),s=n(7444),i=n(28979),u=n(79308),m=n(33954),d="view-viewContainer-header",f="view-viewContainer-content",b="view-viewContainer-contentContainer",E="view-viewContainer-genreContent",g=n(3578),v=n(63025),p=n(7487),y=n(35181),h=n(48529),k=n(30061),w=n(66027),C=n(90849),I=n(41805),L=n(86268),P=n(56738),_=n(1391);const O=e=>"HEADER"===e.rendering,A=e=>{const{title:t,images:n,backgroundColor:r}=e;return a().createElement(a().Fragment,null,((e,t=[],n)=>{if(!e)return null;const r=t.filter((e=>"background"===e.name));return a().createElement(w.gF,{backgroundImages:r,backgroundColor:n,size:0===r.length?w.fR.SMALL:w.fR.DEFAULT},a().createElement(C.W,null,a().createElement(I.i,{text:e})),a().createElement(w.sP,null,a().createElement(w.xd,null,e)))})(t,n,r))},T=a().memo((({viewData:e,viewId:t,backgroundColor:n,isFullyLoaded:l,country:m,isGenre:k,isAnonymous:w})=>{const C=(0,u.I0)(),I=(0,h.k6)(),_=!!e,T=null==e?void 0:e.name,N=(0,r.useCallback)((()=>{C((0,i.MM)(t,m)),C((0,g.browseItemsStyleRequest)())}),[t,m,C]);(0,r.useEffect)((()=>{!m||_&&"POP"===I.action||!t||N(),C((0,s.Dk)(T))}),[m,t,I.action,C,T,_,N]);const M=(0,r.useCallback)((()=>[/ginger-genre-affinity/].some((t=>{var n;return null==e||null===(n=e.href)||void 0===n?void 0:n.match(t)}))),[e]),D=(0,r.useCallback)((()=>{if(!e)return;const n=M();l||n||C((0,i.Ex)(t))}),[M,l,C,e,t]),S=(0,r.useMemo)((()=>{const{content:{items:t=[]}={}}=e||{},n=t.filter(O);return n.length>0?n[0]:null}),[e]),x=(0,r.useMemo)((()=>{const{name:t}=e||{};return S?S.name:n&&t}),[n,S,e]),j=(0,r.useMemo)((()=>k||Boolean(x)),[k,x]),U=(0,r.useMemo)((()=>!(!e||!Array.isArray(e.content.items))&&j),[j,e]),R=a().createElement(A,{title:(null==S?void 0:S.name)||x,images:(null==S?void 0:S.images)||[],backgroundColor:n}),B=null==e?void 0:e.content.items;return e?a().createElement(o.C,{onReachBottom:D},a().createElement("section",{className:c()({[d]:(null==S?void 0:S.name)||x})},U&&a().createElement(L.H,{color:n||null}),j&&R,a().createElement("div",{className:b},j&&R&&a().createElement(v.I,{backgroundColor:n}),a().createElement("div",{className:c()(f,"contentSpacing",{[E]:k})},a().createElement(P.c,{spaces:B,viewName:e.name,viewId:t,isAnonymous:w}))))):a().createElement(p.h,{errorMessage:y.ag.get("error.not_found.title.page")})}));var N=a().memo((({viewId:e,match:t})=>{const n=e||t.params.viewId,{isAnonymous:r}=(0,u.v9)(_.Gg),l=(0,u.v9)(m.r),c=(0,u.v9)((e=>e.entities.views[n]||null)),o=!c||null===c.content.next,s=n.endsWith("-page")?n:`${n}-page`,i=(0,u.v9)((e=>{var t,n;return(null===(t=e.browse.allItemsStyle)||void 0===t||null===(n=t[s])||void 0===n?void 0:n.color)||""})),d=e=>e.viewId===n||"href"in e&&e.href===(0,k.pL)(n),f=(0,u.v9)((e=>{var t,n,r,a;return(null==e||null===(t=e.browse)||void 0===t||null===(n=t.browseAll)||void 0===n?void 0:n.items.some(d))||(null==e||null===(r=e.browse)||void 0===r||null===(a=r.topGenres)||void 0===a?void 0:a.items.some(d))||!!i}));return a().createElement(T,{viewData:c,isFullyLoaded:o,viewId:n,backgroundColor:i,country:l,isGenre:f,isAnonymous:r})}))}}]);
//# sourceMappingURL=xpui-routes-view.js.map