(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[807,219],{62016:function(e,t,n){"use strict";n.r(t),n.d(t,{HOME_REFRESH_TIMEOUT:function(){return T},default:function(){return N}});var r=n(27378),a=n.n(r),c=n(60042),l=n.n(c),s=n(35988),o=n.n(s),i=n(7444),u=n(28979),m=n(79308),d=n(33954),f=n(69394),E=n(47574),p=n(54798),b=n(92657),g=n(18299);const h=()=>(0,E.Sq)(p.Jw)===p.pF.ONHOME?a().createElement(g.w,null,a().createElement(b.M,{onSearch:!1})):null;var v=n(7487),y=n(35181),k=n(48529),w=n(56738),C=n(1391),O=n(38655),_=n(83562),L=n(11701),P=n(18474),I=n(21195);const T=18e5;var N=a().memo((()=>{const{isAnonymous:e}=(0,m.v9)(C.Gg),t=(0,P.v8)(e),n=(0,m.v9)(d.r),c=(0,m.v9)((e=>((e,t)=>e.entities.views[t]||null)(e,t))),s=(0,m.I0)(),E=(0,k.k6)(),p=(0,I.g)(),b=!!c,g=(null==c?void 0:c.timestamp)||0;(0,r.useEffect)((()=>{const e=(0,_.ZO)()===L.W2.Desktop;(0,O.M)().send(o()({desktop_type:"clientx",is_desktop:e}))}),[]);const N=(0,r.useCallback)((()=>{n&&s((0,u.MM)(t,n))}),[n,t,s]);(0,r.useEffect)((()=>{s((0,i.Dk)()),p.setReferrer("home")}),[s,p]),(0,r.useEffect)((()=>{b&&"POP"===E.action||N()}),[E.action,b,N]),(0,r.useEffect)((()=>{const e=()=>{Date.now()>g+T&&N()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[g,N]);const M=null==c?void 0:c.content.items;return a().createElement(a().Fragment,null,a().createElement(r.Suspense,{fallback:null},a().createElement(h,null)),c?a().createElement("section",{"data-testid":"home-page"},a().createElement("div",{className:f.Z.home},a().createElement("div",{className:l()(f.Z.content,"contentSpacing")},a().createElement(w.c,{spaces:M,viewName:c.name,viewId:t,isAnonymous:e})))):a().createElement(v.h,{errorMessage:y.ag.get("error.not_found.title.page")}))}))},56738:function(e,t,n){"use strict";n.d(t,{c:function(){return pe}});var r=n(65526),a=n.n(r),c=n(27378),l=n.n(c),s=n(30061),o=n(38918),i=n(50878),u=n(18856),m=n(18474),d=n(60042),f=n.n(d),E="view-homeShortcutsGrid-shortcuts",p="view-homeShortcutsGrid-grid",b="view-homeShortcutsGrid-shortcutLink",g="view-homeShortcutsGrid-shortcut",h="view-homeShortcutsGrid-draggable",v="view-homeShortcutsGrid-imageContainer",y="view-homeShortcutsGrid-imageWrapper",k="view-homeShortcutsGrid-image",w="view-homeShortcutsGrid-fallbackWrapper",C="view-homeShortcutsGrid-main",O="view-homeShortcutsGrid-name",_="view-homeShortcutsGrid-PlayButtonContainer",L="view-homeShortcutsGrid-PlayButtonContainerVisible",P=n(9807),I=n(44135),T=n(89341),N=n(191),M=n(60024),S=n(14298),A=n(60210),D=n(2398),j=n.n(D),U=n(35181),x=n(66917),R=n.n(x),W=n(34601),B=n(52370),H=n(27572),J=n(12743),F=n(12275),Y=n(16023),Z=n(48529),q=n(88319),G=n(99181),V=n(34159),z=n(54220),K=n(40299),Q=n(95753);const X=l().memo((({images:e=[],fallbackIcon:t=W.e})=>{const n=(0,K.X)(e),r=null!=n&&n.url?y:w;return l().createElement("div",{className:v},l().createElement("div",{className:r},l().createElement(Q.E,{className:k,src:null==n?void 0:n.url,loading:"lazy",testid:"shortcut-image"},l().createElement(t,{"aria-hidden":!0}))))}));var $=n(44084),ee=n(70685);const te=l().memo((({item:e,fallbackIcon:t,showPlayButton:n,onContextMenu:r=(()=>{}),onTouchStart:a=(()=>{}),onTouchEnd:s=(()=>{})})=>{const o=(0,Z.k6)(),i=(0,q.o)(),{setColorFromUri:u,resetColor:m}=(0,$.WQ)(),{isPlaying:d,togglePlay:E}=(0,ee.n)({uri:e.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const p=(0,c.useCallback)((()=>{i({targetUri:e.uri,intent:"navigate",type:"click"}),o.push(R().from(e.uri).toURLPath(!0))}),[o,e.uri,i]),v=(0,c.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return l().createElement("div",{className:g,onContextMenu:r,onTouchStart:a,onTouchEnd:s,onMouseEnter:v,onMouseLeave:m},l().createElement(G.Z,{uri:e.uri,text:e.name,extraClassName:h},l().createElement(X,{images:e.images,fallbackIcon:t}),l().createElement("div",{className:C},l().createElement(z.r,{to:e.uri,onClick:p,title:e.name},l().createElement(P.Dy.p,{variant:P.Dy.balladBold,className:O},e.name)),n&&l().createElement("div",{className:f()(_,{[L]:d})},l().createElement(V.JM,{size:V.qE.sm,isPlaying:d,onClick:function(){i({targetUri:e.uri,intent:d?"pause":"play",type:"click"}),E()}}))),l().createElement("div",{onClick:p,className:b})))}));var ne=n(52003),re=n(7164),ae=n(75933);const ce=l().memo((e=>R().isCollection(e.item.uri)?l().createElement(te,j()({},e,{fallbackIcon:W.e})):l().createElement(F._,{menu:l().createElement(Y.X,{uri:e.item.uri})},l().createElement(te,j()({},e,{fallbackIcon:W.e}))))),le=l().memo((e=>l().createElement(F._,{menu:l().createElement(ne.Y,{uri:e.item.uri})},l().createElement(te,j()({},e,{fallbackIcon:B.u}))))),se=l().memo((e=>l().createElement(F._,{menu:l().createElement(re.m,{uri:e.item.uri})},l().createElement(te,j()({},e,{fallbackIcon:H.i}))))),oe=l().memo((e=>l().createElement(F._,{menu:l().createElement(ae.M,{uri:e.item.uri})},l().createElement(te,j()({},e,{fallbackIcon:J.n,showPlayButton:!1})))));var ie=n(83509);const ue=l().memo((({tagline:e,items:t})=>{const{fetchMultipleColors:n}=(0,$.WQ)(),[r,a]=(0,c.useState)(270),s=!(0,ie.k)(),o=(0,c.useRef)(null),i=(()=>{const e=(new Date).getHours();let t=U.ag.get("home.evening");return e>=5&&e<12?t=U.ag.get("home.morning"):e>=12&&e<18&&(t=U.ag.get("home.afternoon")),t})(),u=(0,c.useCallback)((()=>{const e=o.current;if(null==e||!e.parentElement)return;const t=(n=e.parentElement.offsetWidth)<700?240:n>=700&&n<1400?270:300;var n;t!==r&&a(t)}),[r]);(0,A.a)((()=>{u()})),(0,c.useLayoutEffect)((()=>{u()})),(0,c.useEffect)((()=>{const e=(null==t?void 0:t.map($.lh))||[];n(e)}),[t,n]);const m=(0,c.useCallback)(((e,n)=>{if(null==t||!t.length)return null;const r=n>=270;return l().createElement(l().Fragment,null,t.filter(((t,n)=>n<2*e)).map(((e,t)=>{const n=function(e){const t=(R().from(e)||{}).type;switch(t){case R().Type.ARTIST:return se;case R().Type.ALBUM:case R().Type.COLLECTION_ALBUM:return le;case R().Type.PLAYLIST:case R().Type.PLAYLIST_V2:return ce;case R().Type.SHOW:return oe;case R().Type.COLLECTION:return ce;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),oe}}(e.uri);return l().createElement(n,{key:e.id,item:e,showPlayButton:r,shouldSetBackgroundColor:0===t})})))}),[t]);return s||null==t||!t.length?null:l().createElement("section",{className:E,"aria-label":i,ref:o},l().createElement(N.r,{title:i,titleVariant:P.Dy.alto,tagline:e}),l().createElement(M.T,{className:f()(p),columnAware:!0,render:m,minimumColumnWidth:r,rowGap:S.o78}))})),me=(0,I.P)(ue,(()=>null),(e=>(0,T.v)({from:"HomeShortcutsGrid",error:e})));var de=n(96816);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pe=({spaces:e,viewName:t,viewId:n,isAnonymous:r})=>{const a=(0,c.useCallback)((e=>{const t=((e,t)=>{let{uri:n}=e;return e.href.includes("https://api.spotify.com/v1/views/")&&(n=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),n.endsWith("-page")||(n+="-page"),"hub-browse-grid"===t&&(n=n.replace(":view:",":genre:"))),n})(e,n),r=(0,u.U)(t);return l().createElement(r,{key:e.href,entity:Ee(Ee({},e),{},{uri:t})})}),[n]),d=(0,c.useCallback)(((e,t)=>{const n=(0,u.U)(e.uri);return l().createElement(i.JL,{key:e.uri||t,value:"card",index:t},l().createElement(n,{entity:e}))}),[]),f=(0,c.useCallback)(((e,t)=>{switch(e.type){case"link":return a(e);default:return d(e,t)}}),[d,a]),E=(0,c.useCallback)((e=>!((e=>"HEADER"===e.rendering)(e)||0===e.content.total||r&&"uniquely-yours-shelf"===e.id)),[r]);return e&&0!==e.length?e[0].content?l().createElement(l().Fragment,null,e.filter(E).map(((e,t)=>{const r=e.content&&(0,s.pL)((0,s.SK)(e.href));return e.id===o.RECENTLY_PLAYED_VIEW_ID||e.id===m.uK?l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(o.default,{showAll:!1})):"shortcuts"===e.id?l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(me,{items:e.content.items,title:e.name,tagline:e.tag_line})):l().createElement(i.JL,{value:"headered-grid",index:t,key:e.id},l().createElement(de.P,{total:e.content.total,seeAllUri:r,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(f)))}))):l().createElement(i.JL,{value:"headered-grid"},l().createElement(de.P,{showAll:!0,title:t,total:(null==e?void 0:e.length)||0},null==e?void 0:e.map(f))):null}}}]);
//# sourceMappingURL=xpui-routes-home.js.map